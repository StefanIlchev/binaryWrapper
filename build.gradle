buildscript {

	repositories {
		google()
		mavenCentral()
	}

	dependencies {
		classpath 'com.android.tools.build:gradle:7.2.1'
	}
}

apply {
	plugin 'com.android.library'
	plugin 'maven-publish'
}

allprojects {

	repositories {
		google()
		mavenCentral()
	}
}

android {
	compileSdk 31
	namespace 'ilchev.stefan.binarywrapper'

	compileOptions {
		sourceCompatibility JavaVersion.VERSION_11
		targetCompatibility JavaVersion.VERSION_11
	}

	defaultConfig {
		minSdk 26

		aarMetadata {
			minCompileSdk minSdk
		}
	}

	buildTypes {

		release {
			minifyEnabled false
			proguardFiles getDefaultProguardFile('proguard-android-optimize.txt')
		}
	}

	publishing {

		singleVariant('release') {
			withSourcesJar()
		}
	}
}

publishing {

	publications {

		release(MavenPublication) {
			groupId = 'ilchev.stefan'
			artifactId = 'binary-wrapper'
			version = '1.0.1'

			afterEvaluate {
				from components.release
			}
		}
	}
}
